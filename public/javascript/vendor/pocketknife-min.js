(function(d,j){NodeList.prototype.forEach=HTMLCollection.prototype.forEach=Array.prototype.forEach;d.Pocketknife={version:"2013.05.19"};d.exists=function(a){return void 0!==a&&null!==a};var k=function(a,c,b,e){var g=new XMLHttpRequest,d=exists(e);g.open(a,c,d);d&&(g.withCredentials=!0,g.onreadystatechange=function(){4===g.readyState&&(200===g.status||0===g.status)&&e(g)});if(b){a=new FormData;for(var f in Object.keys(b))a.append(f,b[f]);b=a}g.send(b);if(!d)return g.responseText};d.get=function(a,
c){return k("GET",a,null,c)};d.post=function(a,c,b){return k("POST",a,c,b)};d.create=function(a,c,b){a=j.createElement(a);var e;if("object"==typeof c)for(e in c)c.hasOwnProperty(e)&&a.setAttribute(e,c[e]);"string"===typeof c&&(b=c);b&&(a.innerHTML=b);return a};var l=function(a,c){var b=a.querySelectorAll(c),e=[];if(0===b.length)return[];if(1===b.length)return b[0];for(var g=0,d=b.length;g<d;g++)e[g]=b[g];return e};d.find=function(a){return l(j,a)};var m=function(a){this.owner=a;this.events=[];this.listeners=
{}};m.prototype={record:function(a,c){this.events.pushUnique(a);exists(this.listeners[a])||(this.listeners[a]=[]);this.listeners[a].push(c)},ignore:function(a,c){var b=this.listeners[a].indexOf(c);this.listeners[a].splice(b,1)}};var n=function(a){this.owner=a;a=a.getAttribute("class");this.classes=!a?[]:a.split(/\s+/);this.length=0};n.prototype={classes:[],__update:function(){0===this.classes.length?this.owner.removeAttribute("class"):this.owner.setAttribute("class",this.classes.join(" "));this.length=
this.classes.length},add:function(a){-1===this.classes.indexOf(a)&&this.classes.push(a);this.__update();return this.owner},remove:function(a){a=this.classes.indexOf(a);-1<a&&(this.classes.splice(a,1),this.__update());return this.owner},contains:function(a){return-1!==this.classes.indexOf(a)},item:function(a){return this.classes[a]}};var p=Array.prototype,h=function(a,c){Object.defineProperty(p,a,{value:c})};h("pushUnique",function(a){-1===this.indexOf(a)&&this.push(a)});h("test",function(a,c){!0!==
c&&(c=!1);var b,e=this.length,g;for(b=0;b<e;b++){g=a(this[b]);if(c&&!g)break;if(g&&!c)return!0}return!1});var q=p.forEach;h("forEach",function(a){q.call(this,a);return this});h("classes",function(){if(!this["\u5185\u7d44"]){this["\u5185\u7d44"]={};var a=this;["add","remove"].forEach(function(c){a["\u5185\u7d44"][c]=function(){var b=arguments,e;a.forEach(function(a){e=a.classes();e[c].apply(e,b)});return a}});this["\u5185\u7d44"].contains=function(){var c=arguments,b;return a.test(function(a){b=a.classes();
return b.contains.apply(b,c)})}}return this["\u5185\u7d44"]});["add","replace"].forEach(function(a){h(a,function(){var c=this[0];return c[a].apply(c,arguments)})});"show toggle set remove clear listen ignore listenOnce".split(" ").forEach(function(a){h(a,function(){var c=arguments;this.map(function(b){b[a].apply(b,c)});return this})});["find","parent"].forEach(function(a){h(a,function(){var c=[];this.forEach(function(b){b[a].apply(b,arguments).forEach(function(a){c.pushUnique(a)})});return c})});
["position","html","css","get"].forEach(function(a){h(a,function(){var c=[],b=c,e=arguments;this.forEach(function(c){b.push(c[a].apply(c,e))});return c})});var f=HTMLElement.prototype;f.length=1;f.forEach=function(a){a(this);return this};f.css=function(a,c){if("string"===typeof c)return this.style[a]=c,""===this.get("style")&&this.set("style",""),this;if(!c&&"object"===typeof a){for(var b in a)Object.hasOwnProperty(a,b)||this.css(b,a[b]);return this}return getComputedStyle(this).getPropertyValue(a)||
this.style[a]};f.position=function(){return this.getBoundingClientRect()};f.classes=function(){this["\u5185\u7d44"]||(this["\u5185\u7d44"]=new n(this));return this["\u5185\u7d44"]};f.show=function(a){a?this.set("data-pocketknife-hidden",!1):this.set("data-pocketknife-hidden","true");return this};f.toggle=function(){this.show(d.exists(this.get("data-pocketknife-hidden")));return this};f.html=function(a){return d.exists(a)?(this.innerHTML=a,this):this.innerHTML};f.parent=function(a){return a?(a.add(this),
this):this.parentNode};f.add=function(a){if("string"===typeof a)this.innerHTML+=a;else for(var c,b=function(a){c.add(a)},e=0,g=arguments.length;e<g;e++)d.exists(arguments[e])&&(arguments[e]instanceof Array?(c=this,arguments[e].forEach(b)):this.appendChild(arguments[e]));return this};f.replace=function(a,c){if("string"===typeof a)return this.innerHTML=this.innerHTML.replace(RegExp(a,"g"),c),this;if(d.exists(a.parentNode)&&d.exists(c))return a.parentNode.replaceChild(c,a),c;this.parentNode.replaceChild(a,
this);return a};f.remove=function(a){if("string"===typeof arg)return this.replace(a,"");d.exists(a)?parseInt(a,10)==a?this.removeChild(this.children[a]):a.parentNode&&a.parentNode===this&&this.removeChild(a):this.parentNode.removeChild(this);return this};f.clear=function(){this.innerHTML="";return this};f.get=function(a){return a==parseInt(a,10)?this.children[a]:this.getAttribute(a)};f.set=function(a,c){if(d.exists(c))!1===c?this.removeAttribute(a):this.setAttribute(a,c);else for(var b in a)Object.hasOwnProperty(a,
b)||this.setAttribute(b,a[b]);return this};[d.HTMLDocument?HTMLDocument.prototype:Document.prototype,HTMLElement.prototype].forEach(function(a){a.find=function(a){return l(this,a)};a.eventListeners=!1;a.__addAnEventListener=function(a,b,e){this.addEventListener(a,b,e);this.eventListeners||(this.eventListeners=new m(this));this.eventListeners.record(a,b)};a.__removeAnEventListener=function(a,b,e){this.removeEventListener(a,b,e);this.eventListeners.ignore(a,b)};a.listen=function(a,b){this.__addAnEventListener(a,
b,!1);return this};a.ignore=function(a,b){if(exists(b))this.__removeAnEventListener(a,b,!1);else{var e=this.eventListeners.listeners[a],d;if(exists(e))for(d=e.length-1;0<=d;d--)this.ignore(a,e[d])}return this};a.listenOnce=function(a,b){var e=this,d=function(){e.__removeAnEventListener(a,d,!1);b.call()};this.__addAnEventListener(a,d,!1);return this}});f=d.create("style",{type:"text/css"},"*[data-pocketknife-hidden]{display:none!important;visibility:hidden!important;opacity:0!important}");j.head.add(f);
d.schedule=function(a){if(d.ready)return a();j.listenOnce("DOMContentLoaded",a)};f=function(){d.ready=!0};-1!==["complete","loaded","interactive"].indexOf(j.readyState)?f():j.listenOnce("DOMContentLoaded",f);d.schedule(function(){d.head=document.head});d.schedule(function(){d.body=document.body});delete HTMLParagraphElement.prototype.clear})(window,document);
